#ifndef LAB3_TEST_H
#define LAB3_TEST_H

#include "../include/string_utils.h"

enum TEST_Error
{
    TEST_SUCCESS = 0,        /* тест выполнен успешно */
    TEST_NULL_PTR,           /* один из указателей на Polynomial или другой аргумент == NULL */
    TEST_INVALID_ARG,        /* некорректный ввод: неверный формат строки или M не унитарный */
    TEST_INVALID_MODULO,     /* некорректный модуль (<= 1) */
    TEST_MODULO_MISMATCH,    /* несовпадение модулей у многочленов */
    TEST_ZERO_DIV,           /* деление на нулевой многочлен (M == 0) */
    TEST_MEMORY_ERROR,       /* ошибка выделения памяти */
    TEST_UNKNOWN_ERROR       /* непредвиденная ошибка */
};


/*
 * Выполняет фиксированный набор тестов (не менее 5), проверяющих корректность
 * алгоритма произведения по модулю унитарного многочлена.
 *
 * Каждый тест задаётся внутри функции вручную и охватывает разные случаи:
 *   • обычное корректное вычисление
 *   • произведение с нулевым многочленом
 *   • модуль степени 0 (M(x) = 1)
 *   • случай больших степеней (стресс — тест)
 *   • тест с ошибочным модулем (M не унитарный)
 *
 * Все результаты выводятся на экран в формате:
 *      [TEST N] input → expected → actual → status
 *
 * [RETURN]  TEST_SUCCESS — все тесты выполнены и пройдены успешно
 *           TEST_MEMORY_ERROR — ошибка выделения памяти
 *           TEST_INVALID_MODULO — обнаружен некорректный модуль
 */
int manual_test();


/*
 * Выполняет автоматическое тестирование алгоритма при помощи
 * псевдослучайной генерации входных данных.
 *
 * Пользователь вводит параметры:
 *    • min_degree, max_degree    — диапазон степеней A и B
 *    • modulo                    — характеристика кольца
 *    • mod_deg                   — степень унитарного модуля M
 *    • iterations                — количество тестов
 *
 * Для каждого теста:
 *    1) случайно генерируются A, B, M (M — унитарный);
 *    2) вычисляется R = (A * B) mod M;
 *    3) при включённой отладке выводятся промежуточные данные.
 *
 * Результаты тестов сохраняются в "../data/output.csv" в следующем формате:
 * degree | modulo | mod_deg | mem_used
 *
 * [RETURN]  TEST_SUCCESS        — выполнение завершено успешно, все тесты пройдены
 *           TEST_NULL_PTR       — нулевой указатель при работе с файлом или полиномом
 *           TEST_MEMORY_ERROR   — ошибка выделения памяти
 *           TEST_INVALID_MODULO — некорректный модуль
 *           TEST_INVALID_ARG    — некорректные входные параметры тестирования
 */
int auto_test();


/*
 * Позволяет пользователю (например, преподавателю) напрямую задать
 * многочлены A, B и модуль M вручную, без изменения исходного кода.
 *
 * Формат ввода многочленов:
 *       (c0,c1,c2,...,cn)
 *
 * Последовательность работы:
 *    1) пользователь вводит A
 *    2) пользователь вводит B
 *    3) пользователь вводит унитарный модуль M
 *    4) вычисляется R = (A * B) mod M
 *    5) результат выводится в строковом виде
 *
 * [RETURN]  TEST_SUCCESS         — данные обработаны и результат успешно выведен
 *           TEST_NULL_PTR        — один из указателей на Polynomial равен NULL
 *           TEST_INVALID_ARG     — некорректный формат ввода строки
 *           TEST_INVALID_MODULO  — некорректный модуль (<= 1)
 *           TEST_MODULO_MISMATCH — несовпадение модулей у многочленов
 *           TEST_MEMORY_ERROR    — ошибка выделения памяти
 *           TEST_ZERO_DIV        — модуль M является нулевым многочленом
 */
int input_test();


#endif //LAB3_TEST_H